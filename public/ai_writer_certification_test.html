<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一般AIライター認定試験 - 受験ページ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&family=Noto+Serif+JP:wght@700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #f0b90b; /* 黄色を少し落ち着いた色に */
            --text-color: #2c3e50;
            --bg-light: #f8f9fa;
            --bg-accent: #f0f8ff;
            
            --primary-blue-grey: #3D4852;
            --light-blue-grey: #62748d;
            --accent-gold: #D4AF37;
            --text-dark: #2d3748;
            --text-light: #718096;
            --background: #FDFCF9;
            --section-bg: #f7f9fc;
            --font-serif: 'Noto Serif JP', serif;
            --font-sans: 'Noto Sans JP', sans-serif;
            --color-pass: #28a745;
            --color-fail: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Yu Gothic Medium', 'Meiryo', sans-serif;
            line-height: 1.8;
            color: var(--text-color);
            background: var(--bg-light);
            overflow-x: hidden;
            padding-top: 80px;
            font-size: 1.125rem;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .section {
            padding: 60px 0;
            position: relative;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 40px;
            font-weight: 900;
            line-height: 1.4;
            letter-spacing: 1.5px;
            color: var(--primary-color);
            font-family: 'Noto Sans JP', sans-serif;
        }

        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(253, 252, 249, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            border-bottom: 1px solid rgba(113, 128, 150, 0.1);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: var(--font-serif);
            text-decoration: none;
            line-height: 1.2;
        }
        .logo-main {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue-grey);
            display: inline;
            transition: color 0.3s ease;
        }
        .logo-association {
            font-family: 'Noto Serif JP', serif;
            font-size: 0.8rem;
            color: var(--primary-blue-grey);
            margin-left: 5px;
            vertical-align: middle;
        }
        .logo-sub {
            font-size: 0.6rem;
            font-weight: 400;
            color: var(--text-light);
            letter-spacing: 0.5px;
            display: block;
            transition: color 0.3s ease;
        }

        .test-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 40px;
        }

        .test-section h2 {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--bg-accent);
            padding-bottom: 10px;
        }

        .question-block {
            margin-bottom: 25px;
        }

        .question-block label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .radio-option {
            margin-bottom: 10px;
            display: flex;
            align-items: flex-start;
        }

        .radio-option input[type="radio"] {
            margin-top: 5px;
            margin-right: 10px;
            flex-shrink: 0;
        }

        .radio-option label {
            font-weight: normal;
            margin-bottom: 0;
            cursor: pointer;
        }

        .question-block input[type="text"],
        .question-block textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            font-family: inherit;
            box-sizing: border-box;
        }

        .question-block textarea {
            min-height: 120px;
            resize: vertical;
        }

        .submit-button {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, var(--primary-color), #87CEEB);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .submit-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .result-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-top: 40px;
            display: none; /* Hidden by default */
        }

        .result-section h2 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .result-section .score-display {
            text-align: center;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }
        
        .evaluation-container {
            display: flex;
            flex-direction: column; 
            gap: 30px;
            margin-top: 20px;
        }
        .evaluation-box {
            width: 100%;
            background: #ffffff;
            padding: 25px;
            border-radius: 12px;
            border: 1px solid #e1e8f2;
            box-shadow: 0 8px 16px rgba(0,0,0,0.05);
        }
        .evaluation-box h4 {
            font-size: 1.25rem;
            margin-bottom: 15px;
            color: var(--primary-blue-grey);
            border-bottom: 1px solid #e1e8f2;
            padding-bottom: 10px;
        }
        .evaluation-text-box {
            white-space: pre-wrap;
            margin-bottom: 25px;
            font-size: 0.95rem;
            line-height: 1.7;
            background-color: var(--section-bg);
            padding: 15px;
            border-radius: 8px;
        }

        .chart-table-wrapper {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 30px;
        }
        .chart-container {
            flex: 1 1 250px;
            min-width: 250px;
        }
        .score-table-container {
            flex: 1 1 250px;
        }

        .score-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }
        .score-table th, .score-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        .score-table th {
            font-weight: 500;
            color: var(--text-dark);
        }
        .score-table td {
            text-align: center;
            font-weight: 700;
            font-size: 1.4em;
            color: var(--secondary-color);
            width: 80px;
        }
        .score-table tr:last-child th,
        .score-table tr:last-child td {
            border-bottom: none;
        }
        .score-table tr:nth-child(even) {
            background-color: rgba(240, 185, 11, 0.05);
        }

        .final-result-box {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background: linear-gradient(45deg, var(--bg-accent), #fff);
            border-top: 4px solid var(--primary-color);
            text-align: center;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }
        .final-result-box h3 {
            color: var(--primary-blue-grey);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .final-result-box .score-breakdown p {
            font-size: 1.1rem;
            margin: 8px 0;
            color: var(--text-light);
        }
        .final-result-box .score-breakdown span {
            color: var(--text-dark);
            font-weight: 700;
        }
        .final-result-box hr {
            margin: 20px auto;
            width: 80%;
            border: 0;
            border-top: 1px solid #ccc;
        }
        .total-score-text {
            font-size: 1.3rem !important;
            font-weight: 500;
            color: var(--text-dark);
            margin-top: 1rem !important;
        }
        .total-score-text .score-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        .total-score-text .conversion-note {
            display: block;
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 5px;
        }
        .pass-fail-message {
            margin-top: 25px;
            font-size: 2.5rem;
            font-weight: 900;
            padding: 15px;
            border-radius: 8px;
            display: inline-block;
            line-height: 1;
        }
        .pass-fail-message.pass {
            color: var(--color-pass);
            background-color: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.2);
        }
        .pass-fail-message.fail {
            color: var(--color-fail);
            background-color: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.2);
        }

        .footer {
            background: var(--primary-blue-grey);
            color: rgba(255, 255, 255, 0.7);
            padding: 3rem 0 1rem;
            font-family: var(--font-sans);
            text-align: center;
        }
        .footer-bottom {
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header class="header" id="header">
        <div class="header-container">
            <a href="index.html" class="logo">
                <span class="logo-main">AILA</span>
                <span class="logo-association">AIライター協会</span>
                <span class="logo-sub">Artificial Intelligence Writing Literacy Association</span>
            </a>
            
        </div>
    </header>

<!-- 🔽 ここから貼る -->
<section class="input-section">
  <!-- 入力欄 -->
  <textarea id="q31Text" placeholder="Q31の回答をここに入力"></textarea>
  <textarea id="q32Text" placeholder="Q32の回答をここに入力"></textarea>
  <button id="submitBtn">送信</button>

  <!-- 結果表示 -->
  <pre id="ai-score-result"></pre>

  <!-- レーダーチャート -->
  <div class="chart-container">
    <canvas id="q31RadarChart" width="300" height="300"></canvas>
  </div>
  <div class="chart-container">
    <canvas id="q32RadarChart" width="300" height="300"></canvas>
  </div>
</section>
<!-- 🔼 ここまで貼る -->

    <section class="section">
        <div class="container">
            <h1 class="section-title">一般AIライター認定試験</h1>
            
            <div class="test-section">
                <h2>試験概要</h2>
                <p>この試験は、AIを活用したライティングスキルを評価し、一般AIライターとしての認定を目指すものです。以下の3つのセクションで構成されています。</p>
                <ul>
                    <li><strong>基礎知識:</strong> AIライティングに関する基本的な知識を問います (30問)。</li>
                    <li><strong>編集実技:</strong> AIが生成した文章を、より自然で読みやすい形に編集するスキルを評価します (1問)。</li>
                    <li><strong>200字ライティング:</strong> 与えられたテーマに基づき、200字以内で簡潔かつ効果的な文章を作成する能力を測ります (1問)。</li>
                </ul>
                <p><strong>合格基準:</strong> 総合スコアを50点満点に換算し、35点以上で合格となります。</p>
            </div>

            <form id="exam-form">
                <div class="test-section">
                    <h2>1. 基礎知識 (Basic Knowledge)</h2>
                    <div class="question-block">
                        <label>Q1. AIライティングにおいて「プロンプトの質」が重要とされる理由として、最も適切なものを1つ選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q1_option1" name="q1" value="option1" required>
                            <label for="q1_option1">プロンプトの内容に応じてAIの出力が大きく変わるため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q1_option2" name="q1" value="option2">
                            <label for="q1_option2">プロンプトはAIが自動で補正してくれるため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q1_option3" name="q1" value="option3">
                            <label for="q1_option3">プロンプトの内容は最終的にAIが無視するため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q1_option4" name="q1" value="option4">
                            <label for="q1_option4">プロンプトは文章の装飾に使われるだけのものだから</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q2. AIが生成した文章を「そのまま」使用する際のリスクとして、最も適切なものを1つ選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q2_option1" name="q2" value="option1" required>
                            <label for="q2_option1">誤情報や不適切な表現が含まれ、信頼性を損なう可能性がある</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q2_option2" name="q2" value="option2">
                            <label for="q2_option2">AIの文章は常に正確なので、特にリスクはない</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q2_option3" name="q2" value="option3">
                            <label for="q2_option3">プロンプトの内容と無関係な内容が出てくるため読む価値がない</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q2_option4" name="q2" value="option4">
                            <label for="q2_option4">AIが著作権を所有しているため使用禁止である</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q3. AIライティングにおける「ハルシネーション（幻覚）」とは何を指すか、最も適切なものを1つ選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q3_option1" name="q3" value="option1" required>
                            <label for="q3_option1">AIが事実に反する情報を、さも正しいかのように出力すること</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q3_option2" name="q3" value="option2">
                            <label for="q3_option2">AIが非常に芸術的な表現を使って文章を書くこと</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q3_option3" name="q3" value="option3">
                            <label for="q3_option3">AIが人間の感情に深く共感すること</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q3_option4" name="q3" value="option4">
                            <label for="q3_option4">AIがユーザーの意図を完全に理解すること</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q4. AIライティングで「ペルソナ」を設定する主な目的として、最も適切なものを1つ選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q4_option1" name="q4" value="option1" required>
                            <label for="q4_option1">読者像を明確にし、より訴求力のある文章を作るため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q4_option2" name="q4" value="option2">
                            <label for="q4_option2">記事の文字数を水増しするため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q4_option3" name="q4" value="option3">
                            <label for="q4_option3">AIの学習精度を高めるため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q4_option4" name="q4" value="option4">
                            <label for="q4_option4">表現に統一感を持たせるためだけの装飾として</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q5. AIライティングにおいてSEO（検索エンジン最適化）を考慮する主な理由として、最も適切なものを1つ選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q5_option1" name="q5" value="option1" required>
                            <label for="q5_option1">より多くの読者に文章を届け、検索順位を上げるため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q5_option2" name="q5" value="option2">
                            <label for="q5_option2">誤字脱字を減らし、文章の正確性を高めるため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q5_option3" name="q5" value="option3">
                            <label for="q5_option3">AIの出力スピードを改善するため</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q5_option4" name="q5" value="option4">
                            <label for="q5_option4">読者が記事の存在に気づかないようにするため</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q6. AIライティングで「トーン＆マナー」を統一する重要性は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q6_option1" name="q6" value="option1" required>
                            <label for="q6_option1">ブランドイメージの一貫性を保ち、読者に信頼感を与えるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q6_option2" name="q6" value="option2">
                            <label for="q6_option2">AIの文章生成能力を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q6_option3" name="q6" value="option3">
                            <label for="q6_option3">文章の文字数を制限するため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q7. AIライティングにおいて、ファクトチェックが不可欠である理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q7_option1" name="q7" value="option1" required>
                            <label for="q7_option1">AIが誤った情報や古い情報を生成する可能性があるため、情報の正確性を保証するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q7_option2" name="q7" value="option2">
                            <label for="q7_option2">AIの文章生成速度を遅くするため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q7_option3" name="q7" value="option3">
                            <label for="q7_option3">文章の表現を豊かにするため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q8. AIライティングで「キーワード」を適切に配置する目的は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q8_option1" name="q8" value="option1" required>
                            <label for="q8_option1">検索エンジンがコンテンツの内容を理解し、関連性の高い検索結果に表示するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q8_option2" name="q8" value="option2">
                            <label for="q8_option2">AIの文章生成量を増やすため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q8_option3" name="q8" value="option3">
                            <label for="q8_option3">文章の読みやすさを向上させるため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q9. AIライティングにおいて、「著作権」に関する注意点として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q9_option1" name="q9" value="option1" required>
                            <label for="q9_option1">AIが既存の著作物を学習しているため、意図せず著作権侵害となる表現を生成する可能性があるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q9_option2" name="q9" value="option2">
                            <label for="q9_option2">AIが生成した文章はすべて著作権フリーであるため、自由に利用できるから。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q9_option3" name="q9" value="option3">
                            <label for="q9_option3">AIが生成した文章には著作権が発生しないため、問題ないから。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q10. AIライティングで「校正・校閲」が重要である理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q10_option1" name="q10" value="option1" required>
                            <label for="q10_option1">AIが生成した文章には誤字脱字や不自然な表現が含まれる可能性があり、最終的な品質を確保するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q10_option2" name="q10" value="option2">
                            <label for="q10_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q10_option3" name="q10" value="option3">
                            <label for="q10_option3">AIが生成した文章のオリジナリティを高めるため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q11. AIライティングにおける「プロンプトエンジニアリング」とは何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q11_option1" name="q11" value="option1" required>
                            <label for="q11_option1">AIに与える指示（プロンプト）を最適化し、より質の高い出力を得る技術。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q11_option2" name="q11" value="option2">
                            <label for="q11_option2">AIモデルの内部構造を設計する技術。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q11_option3" name="q11" value="option3">
                            <label for="q11_option3">AIが自動的に文章を生成するプロセス。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q12. AIライティングで「ターゲットオーディエンス」を明確にする理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q12_option1" name="q12" value="option1" required>
                            <label for="q12_option1">読者の興味やニーズに合わせた内容や表現で、より効果的な文章を作成するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q12_option2" name="q12" value="option2">
                            <label for="q12_option2">AIの学習時間を短縮するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q12_option3" name="q12" value="option3">
                            <label for="q12_option3">文章の文字数を増やすため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q13. AIライティングにおいて、「倫理的な配慮」が重要である理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q13_option1" name="q13" value="option1" required>
                            <label for="q13_option1">差別的な表現や偏見を含む内容を生成しないよう、公平性と中立性を保つため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q13_option2" name="q13" value="option2">
                            <label for="q13_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q13_option3" name="q13" value="option3">
                            <label for="q13_option3">文章のオリジナリティを高めるため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q14. AIライティングで「構成案」を作成する主な目的は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q14_option1" name="q14" value="option1" required>
                            <label for="q14_option1">文章全体の論理的な流れを整理し、読者に分かりやすく情報を伝えるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q14_option2" name="q14" value="option2">
                            <label for="q14_option2">AIの文章生成量を増やすため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q14_option3" name="q14" value="option3">
                            <label for="q14_option3">文章の文字数を制限するため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q15. AIライティングにおいて、「人間による最終確認」が不可欠である理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q15_option1" name="q15" value="option1" required>
                            <label for="q15_option1">AIの限界を補完し、文章の品質、正確性、倫理性を最終的に保証するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q15_option2" name="q15" value="option2">
                            <label for="q15_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q15_option3" name="q15" value="option3">
                            <label for="q15_option3">AIが生成した文章のオリジナリティを高めるため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q16. AIライティングにおいて、読者のエンゲージメントを高めるために重要な要素は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q16_option1" name="q16" value="option1" required>
                            <label for="q16_option1">読者の興味を引く魅力的なタイトルと導入。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q16_option2" name="q16" value="option2">
                            <label for="q16_option2">AIが生成した文章の長さ。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q16_option3" name="q16" value="option3">
                            <label for="q16_option3">専門用語を多用すること。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q17. AIライティングで「パーソナライズ」を行う目的は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q17_option1" name="q17" value="option1" required>
                            <label for="q17_option1">個々の読者に合わせた内容を提供し、関連性を高めるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q17_option2" name="q17" value="option2">
                            <label for="q17_option2">AIの学習データを増やすため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q17_option3" name="q17" value="option3">
                            <label for="q17_option3">文章の文字数を増やすため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q18. AIライティングにおいて、コンテンツの「鮮度」を保つために重要なことは何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q18_option1" name="q18" value="option1" required>
                            <label for="q18_option1">最新の情報やトレンドを定期的に取り入れること。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q18_option2" name="q18" value="option2">
                            <label for="q18_option2">一度生成した文章は変更しないこと。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q18_option3" name="q18" value="option3">
                            <label for="q18_option3">古い情報を意図的に残すこと。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q19. AIライティングで「ストーリーテリング」を活用する目的は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q19_option1" name="q19" value="option1" required>
                            <label for="q19_option1">読者の感情に訴えかけ、記憶に残りやすい文章を作成するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q19_option2" name="q19" value="option2">
                            <label for="q19_option2">文章の文字数を増やすため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q19_option3" name="q19" value="option3">
                            <label for="q19_option3">AIの文章生成速度を向上させるため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q20. AIライティングにおいて、「読者の行動喚起（CTA）」を促すために重要な要素は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q20_option1" name="q20" value="option1" required>
                            <label for="q20_option1">明確で魅力的な指示と、行動へのメリット提示。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q20_option2" name="q20" value="option2">
                            <label for="q20_option2">文章の最後に長い説明文を追加すること。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q20_option3" name="q20" value="option3">
                            <label for="q20_option3">読者に選択肢を与えないこと。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q21. AIライティングで「多言語対応」を考慮するメリットは何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q21_option1" name="q21" value="option1" required>
                            <label for="q21_option1">より広範な読者層にアプローチし、グローバルな展開を可能にするため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q21_option2" name="q21" value="option2">
                            <label for="q21_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q21_option3" name="q21" value="option3">
                            <label for="q21_option3">文章の文字数を制限するため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q22. AIライティングにおいて、「コンテンツの再利用」を効率的に行う方法は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q22_option1" name="q22" value="option1" required>
                            <label for="q22_option1">既存の文章をAIで要約、拡張、または異なる形式に変換すること。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q22_option2" name="q22" value="option2">
                            <label for="q22_option2">常に新しい文章をゼロから生成すること。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q22_option3" name="q22" value="option3">
                            <label for="q22_option3">手動で全ての文章をコピー＆ペーストすること。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q23. AIライティングで「ブランドボイス」を維持する重要性は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q23_option1" name="q23" value="option1" required>
                            <label for="q23_option1">企業や製品の個性を表現し、読者に一貫した印象を与えるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q23_option2" name="q23" value="option2">
                            <label for="q23_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q23_option3" name="q23" value="option3">
                            <label for="q23_option3">文章の文字数を制限するため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q24. AIライティングにおいて、「データ分析」を活用する目的は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q24_option1" name="q24" value="option1" required>
                            <label for="q24_option1">読者の行動やコンテンツのパフォーマンスを理解し、改善に役立てるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q24_option2" name="q24" value="option2">
                            <label for="q24_option2">AIの学習データを増やすため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q24_option3" name="q24" value="option3">
                            <label for="q24_option3">文章の誤字脱字を減らすため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q25. AIライティングで「A/Bテスト」を行う目的は何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q25_option1" name="q25" value="option1" required>
                            <label for="q25_option1">異なるバージョンの文章を比較し、より効果的な表現や構成を見つけるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q25_option2" name="q25" value="option2">
                            <label for="q25_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q25_option3" name="q25" value="option3">
                            <label for="q25_option3">文章の文字数を増やすため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q26. AIライティングにおいて、「著作権」に関する注意点として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q26_option1" name="q26" value="option1" required>
                            <label for="q26_option1">AIが既存の著作物を学習しているため、意図せず著作権侵害となる表現を生成する可能性があるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q26_option2" name="q26" value="option2">
                            <label for="q26_option2">AIが生成した文章はすべて著作権フリーであるため、自由に利用できるから。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q26_option3" name="q26" value="option3">
                            <label for="q26_option3">AIが生成した文章には著作権が発生しないため、問題ないから。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q27. AIライティングで「校正・校閲」が重要である理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q27_option1" name="q27" value="option1" required>
                            <label for="q27_option1">AIが生成した文章には誤字脱字や不自然な表現が含まれる可能性があり、最終的な品質を確保するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q27_option2" name="q27" value="option2">
                            <label for="q27_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q27_option3" name="q27" value="option3">
                            <label for="q27_option3">AIが生成した文章のオリジナリティを高めるため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q28. AIライティングにおける「プロンプトエンジニアリング」とは何ですか？</label>
                        <div class="radio-option">
                            <input type="radio" id="q28_option1" name="q28" value="option1" required>
                            <label for="q28_option1">AIに与える指示（プロンプト）を最適化し、より質の高い出力を得る技術。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q28_option2" name="q28" value="option2">
                            <label for="q28_option2">AIモデルの内部構造を設計する技術。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q28_option3" name="q28" value="option3">
                            <label for="q28_option3">AIが自動的に文章を生成するプロセス。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q29. AIライティングで「ターゲットオーディエンス」を明確にする理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q29_option1" name="q29" value="option1" required>
                            <label for="q29_option1">読者の興味やニーズに合わせた内容や表現で、より効果的な文章を作成するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q29_option2" name="q29" value="option2">
                            <label for="q29_option2">AIの学習時間を短縮するため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q29_option3" name="q29" value="option3">
                            <label for="q29_option3">文章の文字数を増やすため。</label>
                        </div>
                    </div>
                    <div class="question-block">
                        <label>Q30. AIライティングにおいて、「倫理的な配慮」が重要である理由として最も適切なものを選んでください。</label>
                        <div class="radio-option">
                            <input type="radio" id="q30_option1" name="q30" value="option1" required>
                            <label for="q30_option1">差別的な表現や偏見を含む内容を生成しないよう、公平性と中立性を保つため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q30_option2" name="q30" value="option2">
                            <label for="q30_option2">AIの文章生成速度を向上させるため。</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="q30_option3" name="q30" value="option3">
                            <label for="q30_option3">文章のオリジナリティを高めるため。</label>
                        </div>
                    </div>
                </div>

                <div class="test-section">
                    <h2>2. 編集実技 (Editing Practical Skill)</h2>
                    <div class="question-block">
                        <label for="q31">Q31. 以下のAI生成文章を、より自然で読みやすい日本語に修正してください。</label>
                        <p style="background: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 15px;">AIは未来のライティングを変革します。それは効率性を高め、創造性を刺激します。しかし、人間の介入は不可欠です。なぜなら、AIは感情やニュアンスを完全に理解できないからです。最終的な品質は人間の編集に依存します。</p>
                        <textarea id="q31" name="q31" required></textarea>
                    </div>
                </div>

                <div class="test-section">
                    <h2>3. 200字ライティング (200-character Writing)</h2>
                    <div class="question-block">
                        <label for="q32">Q32. 「未来の働き方」をテーマに、200字以内であなたの考えを述べてください。</label>
                        <textarea id="q32" name="q32" maxlength="200" required></textarea>
                        <p style="text-align: right; font-size: 0.9rem; color: #666;">文字数: <span id="char-count">0</span>/200</p>
                    </div>
                </div>

                <button type="submit" class="submit-button">試験を提出して採点する</button>
            </form>

            <div id="result-section" class="result-section">
                <h2>試験結果</h2>
                <p class="score-display">あなたの基礎知識スコア: <strong><span id="score"></span>/30点</strong></p>
                <hr style="margin: 20px 0;">
                
                <div class="evaluation-container">
                    <div class="evaluation-box">
                        <h4>Q31 編集実技 評価</h4>
                        <div id="q31-evaluation-result" class="evaluation-text-box"></div>
                        <div class="chart-table-wrapper">
                            <div class="chart-container">
                                <canvas id="q31RadarChart"></canvas>
                            </div>
                            <div id="q31-score-table" class="score-table-container"></div>
                        </div>
                    </div>
                    <div class="evaluation-box">
                        <h4>Q32 200字ライティング 評価</h4>
                        <div id="q32-evaluation-result" class="evaluation-text-box"></div>
                        <div class="chart-table-wrapper">
                            <div class="chart-container">
                                <canvas id="q32RadarChart"></canvas>
                            </div>
                            <div id="q32-score-table" class="score-table-container"></div>
                        </div>
                    </div>
                </div>

                <div id="final-result-box" class="final-result-box" style="display: none;">
                    <h3>総合評価</h3>
                    <div class="score-breakdown">
                        <p>基礎知識スコア: <span id="final-basic-score"></span> / 30点</p>
                        <p>編集実技スコア: <span id="final-q31-score"></span> / 25点</p>
                        <p>200字ライティングスコア: <span id="final-q32-score"></span> / 25点</p>
                    </div>
                    <hr>
                    <p id="total-score-text" class="total-score-text">
                        あなたの総合スコア: <span class="score-value"></span> / 80点
                        <span class="conversion-note"></span>
                    </p>
                    <div id="pass-fail-message" class="pass-fail-message"></div>
                </div>
                 </div>

        </div>
    </section>

    <footer class="footer">
        <div class="footer-bottom">
            <p>&copy; 2025 AILA (Artificial Intelligence Writing Literacy Association). All rights reserved.</p>
        </div>
    </footer>

    <script>
    // 200字ライティングの文字数カウンター
    const q32Textarea = document.getElementById('q32');
    const charCountSpan = document.getElementById('char-count');
    if (q32Textarea && charCountSpan) {
        q32Textarea.addEventListener('input', () => {
            charCountSpan.textContent = q32Textarea.value.length;
        });
    }
    
    // デバッグ用に全問の選択肢1にチェックを入れる機能（不要な場合はこのブロックごと削除してください）
    window.addEventListener("DOMContentLoaded", () => {
        for (let i = 1; i <= 30; i++) {
            const radio = document.getElementById(`q${i}_option1`);
            if (radio) {
                radio.checked = true;
            }
        }
    });

    // 正解の定義
    const correctAnswers = {};
    for (let i = 1; i <= 30; i++) {
        correctAnswers[`q${i}`] = 'option1';
    }

    // フォーム送信時の処理
    const examForm = document.getElementById('exam-form');
    const resultSection = document.getElementById('result-section');
    const scoreSpan = document.getElementById('score');
    
    const q31ResultElem = document.getElementById("q31-evaluation-result");
    const q32ResultElem = document.getElementById("q32-evaluation-result");
    
    if (examForm && resultSection) {
        examForm.addEventListener('submit', (e) => {
            e.preventDefault();

            // 基礎知識スコアの計算
            let score = 0;
            for (let i = 1; i <= 30; i++) {
                const qName = `q${i}`;
                const selectedOption = document.querySelector(`input[name="${qName}"]:checked`);
                if (selectedOption && selectedOption.value === correctAnswers[qName]) {
                    score++;
                }
            }
            scoreSpan.textContent = score;

            // 記述問題のテキストを取得
            const q31Text = document.getElementById("q31").value.trim();
            const q32Text = document.getElementById("q32").value.trim();

            // フォームを非表示にして結果セクションを表示
            examForm.style.display = 'none';
            resultSection.style.display = 'block';
            window.scrollTo(0, resultSection.offsetTop - 100);

            q31ResultElem.textContent = "AIが採点中です...";
            q32ResultElem.textContent = "AIが採点中です...";
            
            // サーバーのAPIエンドポイントを呼び出す
            fetch("/api/grade", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ q31Text, q32Text })
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(err => {
                        throw new Error(err.error || 'サーバーで不明なエラーが発生しました。');
                    });
                }
                return response.json();
            })
            .then(data => {
                const gptResponseContent = data.gptResponse;
                if (!gptResponseContent) {
                    throw new Error("APIからのレスポンス形式が不正です。");
                }

                const jsonMatch = gptResponseContent.match(/```json\n([\s\S]*?)\n```/);
                const commentaryPart = gptResponseContent.substring(gptResponseContent.lastIndexOf("```") + 3).trim();
                const q31Match = commentaryPart.match(/Q31[\s\S]*?(?=\nQ32|$)/);
                const q32Match = commentaryPart.match(/Q32[\s\S]*/);

                const q31Commentary = q31Match ? q31Match[0].trim() : "Q31の講評が取得できませんでした。";
                const q32Commentary = q32Match ? q32Match[0].trim() : "Q32の講評が取得できませんでした。";

                q31ResultElem.textContent = q31Commentary;
                q32ResultElem.textContent = q32Commentary;

                if (jsonMatch && jsonMatch[1]) {
                    const scoresData = JSON.parse(jsonMatch[1]);
                    
                    createScoreTable('q31-score-table', scoresData.q31_scores);
                    createRadarChart('q31RadarChart', '編集実技', scoresData.q31_scores);
                    
                    createScoreTable('q32-score-table', scoresData.q32_scores);
                    createRadarChart('q32RadarChart', '200字ライティング', scoresData.q32_scores);
                    
                    calculateAndShowFinalResult(score, q31Commentary, q32Commentary);

                } else {
                    throw new Error("APIレスポンスから採点データ(JSON)が見つかりませんでした。");
                }
            })
            .catch(error => {
                console.error("API呼び出しエラー:", error);
                const errorMessage = `
                    <p style="color: #d9534f; font-weight: bold;">自動採点中にエラーが発生しました。</p>
                    <p style="font-size:0.9em;">${error.message}</p>
                    <p style="font-size:0.8em; margin-top:5px;">サーバーが起動しているか、またはサーバー側のログを確認してください。</p>
                `;
                q31ResultElem.innerHTML = errorMessage;
                q32ResultElem.innerHTML = "";
            });
        });
    }
    
    function calculateAndShowFinalResult(basicScore, q31Commentary, q32Commentary) {
        const q31ScoreMatch = q31Commentary.match(/合計(\d+)点/);
        const q32ScoreMatch = q32Commentary.match(/合計(\d+)点/);

        const q31Score = q31ScoreMatch ? parseInt(q31ScoreMatch[1], 10) : 0;
        const q32Score = q32ScoreMatch ? parseInt(q32ScoreMatch[1], 10) : 0;

        const totalScore = basicScore + q31Score + q32Score;

        document.getElementById('final-basic-score').textContent = basicScore;
        document.getElementById('final-q31-score').textContent = q31Score;
        document.getElementById('final-q32-score').textContent = q32Score;
        
        const normalizedScore = (totalScore / 80) * 50;
        document.querySelector('.total-score-text .score-value').textContent = totalScore;
        document.querySelector('.total-score-text .conversion-note').textContent = `(50点満点換算: ${normalizedScore.toFixed(1)}点)`;

        const passFailElem = document.getElementById('pass-fail-message');
        const passingGrade = 35; 

        if (normalizedScore >= passingGrade) {
            passFailElem.textContent = '合　格';
            passFailElem.className = 'pass-fail-message pass';
        } else {
            passFailElem.textContent = '不合格';
            passFailElem.className = 'pass-fail-message fail';
        }
        
        document.getElementById('final-result-box').style.display = 'block';
    }

    function createScoreTable(containerId, scores) {
        const container = document.getElementById(containerId);
        if (!container || !scores) return;

        let tableHTML = '<table class="score-table"><tbody>';

        for (const [label, value] of Object.entries(scores)) {
            tableHTML += '<tr>';
            tableHTML += `<th>${label}</th>`;
            tableHTML += `<td>${value}</td>`;
            tableHTML += '</tr>';
        }

        tableHTML += '</tbody></table>';
        container.innerHTML = tableHTML;
    }

    function createRadarChart(canvasId, label, scores) {
        const chartElement = document.getElementById(canvasId);
        if (!chartElement || !scores) {
             console.error(`Chart element #${canvasId} or scores not found.`);
             return;
        }
        const ctx = chartElement.getContext('2d');
        
        const existingChart = Chart.getChart(ctx);
        if(existingChart) {
            existingChart.destroy();
        }

        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: Object.keys(scores),
                datasets: [{
                    label: label,
                    data: Object.values(scores),
                    backgroundColor: 'rgba(240, 185, 11, 0.5)',
                    borderColor: 'rgba(240, 185, 11, 1)',
                    borderWidth: 2,
                    pointBackgroundColor: '#fff',
                    pointBorderColor: 'rgba(240, 185, 11, 1)',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(240, 185, 11, 1)',
                    pointRadius: 4,
                    pointHoverRadius: 6
                }]
            },
            options: {
                scales: {
                    r: {
                        angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                        grid: { color: 'rgba(0, 0, 0, 0.1)' },
                        pointLabels: { 
                            font: { 
                                size: 13, 
                                family: "'Noto Sans JP', sans-serif",
                                weight: '500'
                            },
                            color: '#333'
                        },
                        suggestedMin: 0,
                        suggestedMax: 5,
                        ticks: { stepSize: 1, display: false }
                    }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { 
                        callbacks: { label: (c) => `${c.dataset.label}: ${c.raw}点` },
                        backgroundColor: 'rgba(0,0,0,0.7)',
                        titleFont: { size: 14 },
                        bodyFont: { size: 12 },
                        padding: 10,
                        cornerRadius: 4
                    }
                }
            }
        });
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/grade.js"></script>
</body>
</html>